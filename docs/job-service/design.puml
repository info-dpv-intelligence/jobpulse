@startuml

class JobPost {
  +id: UUID
  +title: String
  +description: String
  +job_poster_id: UUID
  +created_at: DateTime
  +updated_at: DateTime
  +is_active: Boolean
}

enum ApplicationStatus {
  APPLIED
  REVIEWED
  REJECTED
}

class JobApplication {
  +id: UUID
  +job_post_id: UUID
  +job_applicant_id: UUID
  +status: ApplicationStatus
  +applied_at: DateTime
  +updated_at: DateTime
}

enum ApplicationFileType {
  RESUME
  COVER
  OTHER
}

class ApplicationFiles {
  +id: UUID
  +job_application_id: UUID
  +file_name: String
  +file_type: ApplicationFileType
  +uploaded_at: DateTime
}

JobPost "1" -- "0..*" JobApplication : has
JobApplication "0..*" -- "1" ApplicationFiles : contains

package "Shared" {
  package "Model" {
    enum UserRole {
      ADMIN
      JOB_POSTER
      JOB_APPLICANT
    }
  }
  package "JwtToken" {
    package "Model" {
      class TokenUser {
        +userId: UUID
        +role: UserRole
      }
    }
    class JwtTokenService {
      +extractTokenFromHeader(header: String): TokenUser
    }
  }
}

class CreateJobPostRequest {
  +title: String
}

class ApplyToJobRequest {
  +job_post_id: UUID
}

class UploadApplicationFilesRequest {
  +job_application_id: UUID
  +file_name: String
  +file_type: String
}

class JobService {
  JobService(JwtTokenService jwtTokenService)
  +createJobPost(request: CreateJobPostRequest, tokenUser: TokenUser): JobPost
  +getJobPosts(): List<JobPost>
  +applyToJob(request: ApplyToJobRequest, tokenUser: TokenUser): JobApplication
  +getApplicationsForJob(jobPostId: UUID): List<JobApplication>
  +uploadApplicationFiles(request: UploadApplicationFilesRequest, tokenUser: TokenUser): ApplicationFiles
}